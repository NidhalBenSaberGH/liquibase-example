<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <changeSet author="nbensaber (generated)" id="1571839989181-1">
        <createTable tableName="airlines">
            <column name="airline" type="CHAR(2)">
                <constraints primaryKey="true" primaryKeyName="airlines_pk"/>
            </column>
            <column name="airline_full" type="VARCHAR(24)"/>
            <column name="basic_rate" type="FLOAT8"/>
            <column name="distance_discount" type="FLOAT8"/>
            <column name="business_level_factor" type="FLOAT8"/>
            <column name="firstclass_level_factor" type="FLOAT8"/>
            <column name="economy_seats" type="INTEGER"/>
            <column name="business_seats" type="INTEGER"/>
            <column name="firstclass_seats" type="INTEGER"/>
        </createTable>
    </changeSet>
    <changeSet author="nbensaber (generated)" id="1571839989181-2">
        <createTable tableName="cities">
            <column name="city_id" type="INTEGER">
                <constraints primaryKey="true" primaryKeyName="cities_pk"/>
            </column>
            <column name="city_name" type="VARCHAR(24)">
                <constraints nullable="false"/>
            </column>
            <column name="country" type="VARCHAR(26)">
                <constraints nullable="false"/>
            </column>
            <column name="airport" type="VARCHAR(3)"/>
            <column name="language" type="VARCHAR(16)"/>
            <column name="country_iso_code" type="CHAR(2)"/>
        </createTable>
    </changeSet>
    <changeSet author="nbensaber (generated)" id="1571839989181-3">
        <createTable tableName="countries">
            <column name="country" type="VARCHAR(26)">
                <constraints nullable="false"/>
            </column>
            <column name="country_iso_code" type="CHAR(2)">
                <constraints primaryKey="true" primaryKeyName="countries_pk"/>
            </column>
            <column name="region" type="VARCHAR(26)"/>
        </createTable>
    </changeSet>
    <changeSet author="nbensaber (generated)" id="1571839989181-4">
        <createTable tableName="flightavailability">
            <column name="flight_id" type="CHAR(6)">
                <constraints primaryKey="true" primaryKeyName="flightavail_pk"/>
            </column>
            <column name="segment_number" type="INTEGER">
                <constraints primaryKey="true" primaryKeyName="flightavail_pk"/>
            </column>
            <column name="flight_date" type="date">
                <constraints primaryKey="true" primaryKeyName="flightavail_pk"/>
            </column>
            <column defaultValueNumeric="0" name="economy_seats_taken" type="INTEGER"/>
            <column defaultValueNumeric="0" name="business_seats_taken" type="INTEGER"/>
            <column defaultValueNumeric="0" name="firstclass_seats_taken" type="INTEGER"/>
        </createTable>
    </changeSet>
    <changeSet author="nbensaber (generated)" id="1571839989181-5">
        <createTable tableName="flights">
            <column name="flight_id" type="CHAR(6)">
                <constraints primaryKey="true" primaryKeyName="flights_pk"/>
            </column>
            <column name="segment_number" type="INTEGER">
                <constraints primaryKey="true" primaryKeyName="flights_pk"/>
            </column>
            <column name="orig_airport" type="CHAR(3)"/>
            <column name="depart_time" type="TIME WITHOUT TIME ZONE"/>
            <column name="dest_airport" type="CHAR(3)"/>
            <column name="arrive_time" type="TIME WITHOUT TIME ZONE"/>
            <column name="meal" type="CHAR(1)"/>
            <column name="flying_time" type="FLOAT8"/>
            <column name="miles" type="INTEGER"/>
            <column name="aircraft" type="VARCHAR(6)"/>
        </createTable>
    </changeSet>
    <changeSet author="nbensaber (generated)" id="1571839989181-6">
        <createTable tableName="flights_history">
            <column name="flight_id" type="CHAR(6)"/>
            <column name="segment_number" type="INTEGER"/>
            <column name="orig_airport" type="CHAR(3)"/>
            <column name="depart_time" type="TIME WITHOUT TIME ZONE"/>
            <column name="dest_airport" type="CHAR(3)"/>
            <column name="arrive_time" type="TIME WITHOUT TIME ZONE"/>
            <column name="meal" type="CHAR(1)"/>
            <column name="flying_time" type="FLOAT8"/>
            <column name="miles" type="INTEGER"/>
            <column name="aircraft" type="VARCHAR(6)"/>
            <column name="status" type="VARCHAR(20)"/>
        </createTable>
    </changeSet>
    <changeSet author="nbensaber (generated)" id="1571839989181-7">
        <createTable tableName="maps">
            <column name="map_id" type="INTEGER">
                <constraints primaryKey="true" primaryKeyName="maps_pk"/>
            </column>
            <column name="map_name" type="VARCHAR(24)">
                <constraints nullable="false"/>
            </column>
            <column name="region" type="VARCHAR(26)"/>
            <column name="area" type="numeric(8, 4)">
                <constraints nullable="false"/>
            </column>
            <column name="photo_format" type="VARCHAR(26)">
                <constraints nullable="false"/>
            </column>
            <column name="picture" type="BYTEA"/>
        </createTable>
    </changeSet>
    <changeSet author="nbensaber (generated)" id="1571839989181-8">
        <addUniqueConstraint columnNames="country" constraintName="countries_unq_nm" tableName="countries"/>
    </changeSet>
    <changeSet author="nbensaber (generated)" id="1571839989181-9">
        <addUniqueConstraint columnNames="map_id, map_name" constraintName="maps_map_id_map_name_key" tableName="maps"/>
    </changeSet>
    <changeSet author="nbensaber (generated)" id="1571839989181-10">
        <createIndex indexName="destindex" tableName="flights">
            <column name="dest_airport"/>
        </createIndex>
    </changeSet>
    <changeSet author="nbensaber (generated)" id="1571839989181-11">
        <createIndex indexName="origindex" tableName="flights">
            <column name="orig_airport"/>
        </createIndex>
    </changeSet>
    <changeSet author="nbensaber (generated)" id="1571839989181-12">
        <addForeignKeyConstraint baseColumnNames="country_iso_code" baseTableName="cities" constraintName="countries_fk" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="country_iso_code" referencedTableName="countries" validate="true"/>
    </changeSet>
    <changeSet author="nbensaber (generated)" id="1571839989181-13">
        <addForeignKeyConstraint baseColumnNames="flight_id,segment_number" baseTableName="flightavailability" constraintName="flights_fk2" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="flight_id,segment_number" referencedTableName="flights" validate="true"/>
    </changeSet>
</databaseChangeLog>
